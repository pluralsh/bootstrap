prometheus:
  enabled: true
  agentMode: true
  extraSecret:
    name: basic-auth-remote
    data:
    {% raw %}
      user: {{ configuration.basicAuthUser }}
      password: {{ configuration.basicAuthPassword }}
    {% endraw %}
  prometheusSpec:
    remoteWrite:
    - url: {{ context.prometheusHost }}
      name: mgmt-cluster-prometheus
      basicAuth:
        username: 
          name: basic-auth-remote
          key: user
        password: 
          name: basic-auth-remote
          key: password
      writeRelabelConfigs:
        - sourceLabels: []  
          targetLabel: 'cluster'
          {% raw %}
          replacement: {{ cluster.Handle }}
          {% endraw %}

